{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import Editor from'@monaco-editor/react';import API from'../api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ChallengeDetail(){const{id}=useParams();const[chal,setChal]=useState(null);const[code,setCode]=useState('# write your solution here');const[runOut,setRunOut]=useState({});const[submitMsg,setSubmitMsg]=useState('');const[isSubmitting,setIsSubmitting]=useState(false);const load=async()=>{const res=await API.get(`/api/challenges/${id}`);setChal(res.data);};useEffect(()=>{load();},[id]);const handleSubmit=async()=>{setIsSubmitting(true);setSubmitMsg('Checking…');try{// run code\nconst runRes=await API.post('/api/run-challenge',{challenge_id:+id,code});setRunOut(runRes.data);// submit & decay XP\nconst sub=await API.post('/api/submit-challenge',{challenge_id:+id,user_output:runRes.data.stdout.trim(),code});setSubmitMsg(sub.data.message+` (Attempts: ${sub.data.new_run_count})`);setChal(ch=>({...ch,run_count:sub.data.new_run_count}));}catch(e){var _e$response,_e$response$data;setSubmitMsg(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.message)||'Error');}finally{setIsSubmitting(false);}};if(!chal)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading challenge\\u2026\"});return/*#__PURE__*/_jsx(\"div\",{className:\"challenge-detail-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"challenge-detail-card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:chal.title}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Input:\"}),\" \",chal.sample_input]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Expected:\"}),\" \",chal.expected_output]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Attempts so far:\"}),\" \",chal.run_count]}),/*#__PURE__*/_jsx(Editor,{defaultLanguage:\"python\",value:code,onChange:setCode,theme:document.body.classList.contains('light-mode')?'light':'vs-dark'}),/*#__PURE__*/_jsx(\"div\",{className:\"controls\",children:/*#__PURE__*/_jsx(\"button\",{className:\"enter-btn\",onClick:handleSubmit,disabled:isSubmitting,children:isSubmitting?'Running…':'Practice & Earn'})}),runOut.stdout!=null&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Output:\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"output-pre\",children:runOut.stdout}),runOut.stderr&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'red'},children:\"Errors:\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"error-pre\",children:runOut.stderr})]})]}),submitMsg&&/*#__PURE__*/_jsx(\"p\",{className:submitMsg.startsWith('Correct')?'success-message':'error-message',children:submitMsg})]})});}","map":{"version":3,"names":["React","useEffect","useState","useParams","Editor","API","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChallengeDetail","id","chal","setChal","code","setCode","runOut","setRunOut","submitMsg","setSubmitMsg","isSubmitting","setIsSubmitting","load","res","get","data","handleSubmit","runRes","post","challenge_id","sub","user_output","stdout","trim","message","new_run_count","ch","run_count","e","_e$response","_e$response$data","response","children","className","title","sample_input","expected_output","defaultLanguage","value","onChange","theme","document","body","classList","contains","onClick","disabled","stderr","style","color","startsWith"],"sources":["C:/Users/tay/Documents/GitHub/CodeDojo-Frontend/src/pages/ChallengeDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport Editor from '@monaco-editor/react';\r\nimport API from '../api';\r\n\r\nexport default function ChallengeDetail() {\r\n    const { id } = useParams();\r\n    const [chal, setChal] = useState(null);\r\n    const [code, setCode] = useState('# write your solution here');\r\n    const [runOut, setRunOut] = useState({});\r\n    const [submitMsg, setSubmitMsg] = useState('');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    const load = async () => {\r\n        const res = await API.get(`/api/challenges/${id}`);\r\n        setChal(res.data);\r\n    };\r\n\r\n    useEffect(() => { load(); }, [id]);\r\n\r\n    const handleSubmit = async () => {\r\n        setIsSubmitting(true);\r\n        setSubmitMsg('Checking…');\r\n        try {\r\n            // run code\r\n            const runRes = await API.post('/api/run-challenge', { challenge_id: +id, code });\r\n            setRunOut(runRes.data);\r\n\r\n            // submit & decay XP\r\n            const sub = await API.post('/api/submit-challenge', {\r\n                challenge_id: +id,\r\n                user_output: runRes.data.stdout.trim(),\r\n                code\r\n            });\r\n\r\n            setSubmitMsg(sub.data.message + ` (Attempts: ${sub.data.new_run_count})`);\r\n            setChal(ch => ({ ...ch, run_count: sub.data.new_run_count }));\r\n        } catch (e) {\r\n            setSubmitMsg(e.response?.data?.message || 'Error');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    if (!chal) return <p>Loading challenge…</p>;\r\n\r\n    return (\r\n        <div className=\"challenge-detail-page\">\r\n            <div className=\"challenge-detail-card\">\r\n                <h1>{chal.title}</h1>\r\n                <p><strong>Input:</strong> {chal.sample_input}</p>\r\n                <p><strong>Expected:</strong> {chal.expected_output}</p>\r\n                <p><strong>Attempts so far:</strong> {chal.run_count}</p>\r\n\r\n                {/* no fixed height here—CSS flex will size it */}\r\n                <Editor\r\n                    defaultLanguage=\"python\"\r\n                    value={code}\r\n                    onChange={setCode}\r\n                    theme={document.body.classList.contains('light-mode') ? 'light' : 'vs-dark'}\r\n                />\r\n\r\n                {/* controls pinned below editor */}\r\n                <div className=\"controls\">\r\n                    <button\r\n                        className=\"enter-btn\"\r\n                        onClick={handleSubmit}\r\n                        disabled={isSubmitting}\r\n                    >\r\n                        {isSubmitting ? 'Running…' : 'Practice & Earn'}\r\n                    </button>\r\n                </div>\r\n\r\n                {runOut.stdout != null && (\r\n                    <>\r\n                        <h3>Output:</h3>\r\n                        <pre className=\"output-pre\">{runOut.stdout}</pre>\r\n                        {runOut.stderr && (\r\n                            <>\r\n                                <h3 style={{ color: 'red' }}>Errors:</h3>\r\n                                <pre className=\"error-pre\">{runOut.stderr}</pre>\r\n                            </>\r\n                        )}\r\n                    </>\r\n                )}\r\n\r\n                {submitMsg && (\r\n                    <p className={submitMsg.startsWith('Correct') ? 'success-message' : 'error-message'}>\r\n                        {submitMsg}\r\n                    </p>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}